%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Masters/Doctoral Thesis 
% LaTeX Template
% Version 1.43 (17/5/14)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original authors:
% Steven Gunn 
% http://users.ecs.soton.ac.uk/srg/softwaretools/document/templates/
% and
% Sunil Patel
% http://www.sunilpatel.co.uk/thesis-template/
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
% Note:
% Make sure to edit document variables in the Thesis.cls file
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[11pt, oneside]{Thesis} % The default font size and one-sided printing (no margin offsets)

\graphicspath{{images/}} % Specifies the directory where pictures are stored

%\usepackage[round, comma, sort&compress]{natbib} % Use the natbib reference package - read up on this to edit the reference style; if you want text (e.g. Smith et al., 2012) for the in-text references (instead of numbers), remove 'numbers' 
\hypersetup{urlcolor=blue, colorlinks=true} % Colors hyperlinks in blue - change to black if annoying

\usepackage{amsmath,amsfonts,amssymb}
\usepackage{graphicx}
\usepackage{epsfig}
\usepackage{epstopdf}
\usepackage{rotating}
\usepackage{lineno}
\usepackage{ltablex}
\usepackage{afterpage}

\usepackage[tight,footnotesize]{subfigure}

 
\usepackage{multirow}
%\usepackage[english,algoruled,vlined]{algorithm2e}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{amsmath}
%\usepackage{hyperref}
\usepackage{minitoc}
%\setcounter{secnumdepth}{1}% number \part and \chapter in book classes
\usepackage{array}
\usepackage{xparse}
\usepackage{tabularx}

\usepackage{listings}
%\input{hatp.sty} 


\title{\ttitle} % Defines the thesis title - don't touch this

\begin{document}

\frontmatter % Use roman page numbering style (i, ii, iii, iv...) for the pre-content pages

\setstretch{1.3} % Line spacing of 1.3

% Define the page headers using the FancyHdr package and set up for one-sided printing
\fancyhead{} % Clears all page headers and footers
\rhead{\thepage} % Sets the right side header to show the page number
\lhead{} % Clears the left side page header

\pagestyle{fancy} % Finally, use the "fancy" page style to implement the FancyHdr headers

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}} % New command to make the lines in the title page

\theoremstyle{plain}
\newtheorem*{prop}{Assumption}

\makeatletter
\newcommand{\thickhline}{%
    \noalign {\ifnum 0=`}\fi \hrule height 1.5pt
    \futurelet \reserved@a \@xhline
}
\newcolumntype{"}{@{\hskip\tabcolsep\vrule width 1.5pt\hskip\tabcolsep}}
\makeatother


% PDF meta-data
\hypersetup{pdftitle={\ttitle}}
\hypersetup{pdfsubject=\subjectname}
\hypersetup{pdfauthor=\authornames}
\hypersetup{pdfkeywords=\keywordnames}

\linenumbers % to activate the line numbers
\renewcommand\thelinenumber{\color{red}\arabic{linenumber}}

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

\begin{titlepage}
\begin{center}

\textsc{\LARGE \univname}\\[1.5cm] % University name
\textsc{\Large Doctoral Thesis}\\[0.5cm] % Thesis type

\HRule \\[0.4cm] % Horizontal line
{\huge \bfseries \ttitle}\\[0.4cm] % Thesis title
\HRule \\[1.5cm] % Horizontal line
 
\begin{minipage}{0.4\textwidth}
\begin{flushleft} \large
\emph{Author:}\\
\href{http://www.johnsmith.com}{\authornames} % Author name - remove the \href bracket to remove the link
\end{flushleft}
\end{minipage}
\begin{minipage}{0.4\textwidth}
\begin{flushright} \large
\emph{Supervisor:} \\
\href{http://www.jamessmith.com}{\supname} % Supervisor name - remove the \href bracket to remove the link  
\end{flushright}
\end{minipage}\\[3cm]
 
\large \textit{A thesis submitted in fulfilment of the requirements\\ for the degree of \degreename}\\[0.3cm] % University requirement text
\textit{in the}\\[0.4cm]
%\groupname\\\deptname\\[2cm] % Research group name and department name
 
{\large \today}\\[4cm] % Date
%\includegraphics{Logo} % University/department logo - uncomment to place it
 
\vfill
\end{center}

\end{titlepage}

%\newcommand{\todo}[1]{\textbf{\textit{\color{red} #1}}}
%\newcommand{\todo}[1]{#1}
\newcommand{\note}[1]{\textbf{\textit{\color{blue} #1}}}

%----------------------------------------------------------------------------------------
%	DECLARATION PAGE
%	Your institution may give you a different text to place here
%----------------------------------------------------------------------------------------

%\Declaration{
%
%\addtocontents{toc}{\vspace{1em}} % Add a gap in the Contents, for aesthetics

%I, \authornames, declare that this thesis titled, '\ttitle' and the work presented in it are my own. I confirm that:
%
%\begin{itemize} 
%\item[\tiny{$\blacksquare$}] This work was done wholly or mainly while in candidature for a research degree at this University.
%\item[\tiny{$\blacksquare$}] Where any part of this thesis has previously been submitted for a degree or any other qualification at this University or any other institution, this has been clearly stated.
%\item[\tiny{$\blacksquare$}] Where I have consulted the published work of others, this is always clearly attributed.
%\item[\tiny{$\blacksquare$}] Where I have quoted from the work of others, the source is always given. With the exception of such quotations, this thesis is entirely my own work.
%\item[\tiny{$\blacksquare$}] I have acknowledged all main sources of help.
%\item[\tiny{$\blacksquare$}] Where the thesis is based on work done by myself jointly with others, I have made clear exactly what was done by others and what I have contributed myself.\\
%\end{itemize}
% 
%Signed:\\
%\rule[1em]{25em}{0.5pt} % This prints a line for the signature
% 
%Date:\\
%\rule[1em]{25em}{0.5pt} % This prints a line to write the date
%}

\clearpage % Start a new page

%----------------------------------------------------------------------------------------
%	QUOTATION PAGE
%----------------------------------------------------------------------------------------

\pagestyle{empty} % No headers or footers for the following pages

%\null\vfill % Add some space to move the quote down the page a bit
%
%\textit{``Thanks to my solid academic training, today I can write hundreds of words on virtually any topic without possessing a shred of information, which is how I got a good job in journalism."}
%
%\begin{flushright}
%Dave Barry
%\end{flushright}

\vfill\vfill\vfill\vfill\vfill\vfill\null % Add some space at the bottom to position the quote just right

\clearpage % Start a new page

%----------------------------------------------------------------------------------------
%	ABSTRACT PAGE
%----------------------------------------------------------------------------------------

\addtotoc{Abstract} % Add the "Abstract" page entry to the Contents

\abstract{\addtocontents{toc}{\vspace{1em}} % Add a gap in the Contents, for aesthetics
There has been an increasing interest, in the last years, in robots that are able to cooperate with humans not only as simple tools, but as full agents, able to execute collaborative activities in a natural and efficient way. In this work, we developed an architecture for Human-Robot Interaction able to execute joint activities with humans. This thesis is organized in several chapters, following the layered structure of our system.

First, we explain how we are able to produce symbolic information from perceptual data, through geometrical reasoning, in a Situation Assessment component. Through this capacity, and a rule-based framework, our system is able to model and maintain humans' mental beliefs, allowing the robot to understand what humans currently know about the state of the world. This component is able to infer humans' actions and intentions by linking physical observations, obtained by  reasoning on humans' motions and their relationships with the environment, with planning and humans' mental beliefs, through a framework based on Markov Decision Processes and Bayesian Networks.  We show, in a user study, that this model approaches the capacity of humans to infer intentions.

In our system, the robot can act with goal-oriented behaviors. Goals can be directly received by humans or generated by the system, by reasoning on the state of the world and on the most likely humans' intentions.

After producing a goal, the system creates a shared plan, considering all the agents that collaborate in the scenario. Our system is able to communicate with different planners, and has been used with two task planners, a Hierarchical Task Network based planner, and a novel multi-agent probabilistic planner, based on Markov Decision Processes. Shared plans can be explained to users, negotiated, and monitored. All these aspects can be adapted to the expertise of users on the current scenario, by maintaining and updating the knowledge level of each user on the tasks to perform, and by explaining and monitoring these in more or less details. We show, in a user study, that this adaptive behavior is perceived by users better than a system without this capacity.

After that, we describe how our robot is able to execute actions in a safe and robust way, taking humans into account. We present a framework used to achieve joint actions, by continuously estimating the robot's partner activities and reacting accordingly. This framework uses hierarchical Mixed Observability Markov Decision Processes, which allow us to estimate variables, such as the human's commitment to the task, and to react accordingly, splitting the decision process in different levels.

Finally, we present two case studies where we have applied our system. First, we present a human-aware robot guide, able to guide users with adaptive and proactive behaviors, changing the speed to adapt to their needs, proposing a new pace to better suit the task's objectives, and directly engaging users to propose help. This system was integrated with other components to deploy a robot in the Schiphol Airport of Amsterdam, to guide groups of passengers to their flight gates. We performed user studies both in a laboratory and in the airport, demonstrating the robot's capacities and showing that it is appreciated by users. 

We present a second case study of a domestic robot helper. We show how all the aspects of our systems are combined to perform a joint task. Additionally, we introduce in our system the capacity to perform human-robot handovers, reacting accordingly to the user's actions.

\paragraph{Version fran\c caise}
~\\

Ces dernières années, un intérêt croissant a été porté aux robots en mesure de coopérer avec les humains, non uniquement comme de simples outils, mais comme des agents complets, capables de conduire des activités de collaboration d'une manière naturelle et efficace. Dans ce travail, nous avons développé une architecture pour l'Interaction Homme-Robot capable d'executer des tâches conjointes avec des humains. Nous avons organisé cette thèse en plusieurs chapitres, suivant les differents composants de notre système. 

Tout d'abord, nous expliquons comment le robot est capable de produire des informations symboliques à partir de données perceptives, par raisonnement géométrique, dans un composant d'évaluation de la situation. Grâce à cette capacité, et un cadre fondé sur des règles, notre système est capable de modéliser et de maintenir les états mentales des humains, ce qui permet au robot de comprendre ce que les humains connaissent actuellement sur l'état du monde. Ce composant est en mesure de déduire les actions et les intentions des humains, en reliant les observations physiques, obtenu en raisonnant sur les mouvements des humains et leurs interactions avec l'environnement,  avec la planification et les états mentales des humains, grâce à un cadre fondé sur un Processus de Décision Markovien (MDP) et des réseaux bayésiens. Nous montrons, dans une étude utilisateur, que ce modèle se rapproche de la capacité de l'homme à déduire des intentions. 

Dans notre système, le robot peut agir avec des comportements axés sur les buts. Les objectifs peuvent être reçus directement par les humains ou générés par le système, par un raisonnement sur l'état du monde et sur les intentions  humaines les plus probables. 

Après avoir produit un but, le systéme crée un plan commun, qui inclu tous les agents qui collaborent dans le scénario. Notre système est capable de communiquer avec différents planificateurs, et a été utilisé avec deux planificateurs de tâches, un planificateur basé sur un réseau hiérarchique de tâche (HTN), et un nouveau planificateur probabiliste multi-agent, basé sur un processus de décision markoviens. Les plans partagés peuvent être expliqués aux utilisateurs, négociés et contrôlés. Tous ces aspects peuvent être adaptés à l'expertise des utilisateurs sur le scénario actuel, par le maintien et la mise à jour au niveau de chaque utilisateur des connaissances sur les tâches à accomplir, et en expliquant et surveillant de celles-ci en adaptant le niveau de détails. Nous montrons, dans une étude utilisateur, que ce comportement adaptatif est perçu par les utilisateurs comme une amélioration comparé à un système sans cette capacité. 

Après cela, nous décrivons comment notre robot est capable d'exécuter des actions d'une manière sûre et robuste. Nous présentons une infrastructure logicielle utilisée pour exécuter des actions communes, en estimant en permanence les activités des partenaires du robot et en réagissant en conséquence. Cette infrastructure utilise des processus de décision markoviens hiérarchiques à observabilité mixte, qui nous permet d'estimer les variables, telles que l'engagement de l'homme à la tâche, et de réagir en conséquence, en divisant le processus de décision en différents niveaux. 
}

\clearpage % Start a new page

%----------------------------------------------------------------------------------------
%	ACKNOWLEDGEMENTS
%----------------------------------------------------------------------------------------

\setstretch{1.3} % Reset the line-spacing to 1.3 for body text (if it has changed)

\acknowledgements{\addtocontents{toc}{\vspace{1em}} % Add a gap in the Contents, for aesthetics

TODO\ldots
}
\clearpage % Start a new page

%----------------------------------------------------------------------------------------
%	LIST OF CONTENTS/FIGURES/TABLES PAGES
%----------------------------------------------------------------------------------------

\pagestyle{fancy} % The page style headers have been "empty" all this time, now use the "fancy" headers as defined before to bring them back


\addtocounter{tocdepth}{-4}% “delete” lowest level from TOC

\lhead{\emph{Contents}} % Set the left side page header to "Contents"
\dominitoc[d]
\setcounter{minitocdepth}{2} 
\tableofcontents % Write out the Table of Contents


\lhead{\emph{List of Figures}} % Set the left side page header to "List of Figures"
\listoffigures % Write out the List of Figures
%
\lhead{\emph{List of Tables}} % Set the left side page header to "List of Tables"
\listoftables % Write out the List of Tables


%----------------------------------------------------------------------------------------
%	ABBREVIATIONS
%----------------------------------------------------------------------------------------
%
\clearpage % Start a new page
%
\setstretch{1.5} % Set the line spacing to 1.5, this makes the following tables easier to read
%
\lhead{\emph{Abbreviations}} % Set the left side page header to "Abbreviations"
\listofsymbols{ll} % Include a list of Abbreviations (a table of two columns)
{
\textbf{MDP} & \textbf{M}arkov \textbf{D}ecision \textbf{P}rocess \\
\textbf{POMDP} & \textbf{P}artially \textbf{O}bservable \textbf{M}arkov \textbf{D}ecision \textbf{P}rocess \\
\textbf{MOMDP} & \textbf{M}ixed \textbf{O}bservability \textbf{M}arkov \textbf{D}ecision \textbf{P}rocess \\
\textbf{MAMDP} & \textbf{M}ulti \textbf{A}gent \textbf{M}arkov \textbf{D}ecision \textbf{P}rocess \\
\textbf{BN} & \textbf{B}ayesan \textbf{N}etwork \\
\textbf{DBN} & \textbf{D}ynamic \textbf{B}ayesan \textbf{N}etwork \\
\textbf{IG} & \textbf{I}ntention \textbf{G}raph \\
\textbf{HATP} & \textbf{H}uman-\textbf{A}ware \textbf{T}ask \textbf{P}lanner \\
\textbf{HAPP} & \textbf{H}uman-\textbf{A}ware \textbf{P}robabilistic \textbf{P}lanner \\
}

%----------------------------------------------------------------------------------------
%	PHYSICAL CONSTANTS/OTHER DEFINITIONS
%----------------------------------------------------------------------------------------

%\clearpage % Start a new page
% %
% \lhead{\emph{Definitions}} % Set the left side page header to "Physical Constants"
% %
% \begin{itemize}
% \item Agent: a human or robot.
% \item Entity: an agent, an agent's joint, or an object.
% \item Joint: an agent is composed by different joints (e.g. head, hand for a human; gripper, base, for a robot).
% \item Action:  a tuple $(name, preconditions, target, postconditions)$. The $name$ of an action is a unique string that identifies it. The $preconditions$ are a list of properties that must be true in order to realize the action. In our system, an action is executed on a $target$, which can be a physical object, like a cup, but also an area of the environment, like a room. The $postconditions$ are the set of properties, and their values, affected by the action's execution.
% \item Fact: a statetement composed by a $pubject$, a $predicate$, and a $value$.
% \end{itemize}

%----------------------------------------------------------------------------------------
%	SYMBOLS
%----------------------------------------------------------------------------------------
%
%\clearpage % Start a new page
%
%\lhead{\emph{Symbols}} % Set the left side page header to "Symbols"
%
%\listofnomenclature{lll} % Include a list of Symbols (a three column table)
%{
%$a$ & distance & m \\
%$P$ & power & W (Js$^{-1}$) \\
%% Symbol & Name & Unit \\
%
%& & \\ % Gap to separate the Roman symbols from the Greek
%
%$\omega$ & angular frequency & rads$^{-1}$ \\
%% Symbol & Name & Unit \\
%}

%----------------------------------------------------------------------------------------
%	DEDICATION
%----------------------------------------------------------------------------------------

%\setstretch{1.3} % Return the line spacing back to 1.3
%
%\pagestyle{empty} % Page style needs to be empty for this page
%
%\dedicatory{For/Dedicated to/To my\ldots} % Dedication text
%
%\addtocontents{toc}{\vspace{2em}} % Add a gap in the Contents, for aesthetics

%----------------------------------------------------------------------------------------
%	THESIS CONTENT - CHAPTERS
%----------------------------------------------------------------------------------------

\mainmatter % Begin numeric (1,2,3...) page numbering

\pagestyle{fancy} % Return the page headers back to the "fancy" style

% Include the chapters of the thesis as separate files from the Chapters folder
% Uncomment the lines as you write the chapters

\setcounter{mtc}{5}


\addtocontents{toc}{\vspace{2em}} % Add a gap in the Contents, for aesthetics


\newpage


\setcounter{mtc}{5}
\input{parts/introduction/general_overview.tex}
\input{parts/observer/robot_observer.tex}
\input{parts/coworker/robot_coworker.tex}
\input{parts/teacher/robot_teacher.tex}


% \input{chapters/intro.tex}
% \input{parts/robot_teacher.tex}
% \input{parts/case_studies.tex}
% \input{chapters/situation_assessment.tex}
% \input{chapters/goal_management.tex}
% \input{chapters/plan_management.tex}
% \input{chapters/plan_execution.tex}
% \input{chapters/case_study.tex}
% \input{chapters/mamdp.tex}
% \input{chapters/conclusions.tex}


\newpage
\appendix
% \input{chapters/methods.tex}

\bibliographystyle{plainnat} % Use the "unsrtnat" BibTeX style for formatting the Bibliography
% \bibliographystyle{apalike}
% \bibliographystyle{unsrtnat}
% \bibliographystyle{IEEEtran}

\lhead{\emph{Bibliography}} % Change the page header to say "Bibliography"
\bibliography{all.bib} % The references (bibliography) information are stored in the file named "thesis.bib"


\end{document}  